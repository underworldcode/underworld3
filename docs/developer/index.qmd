---
title: "Underworld3 Developer Documentation"
subtitle: "Complete Guide to Architecture, Implementation, and Development"
---

# Welcome to Underworld3 Developer Documentation

This comprehensive documentation provides everything you need to understand, contribute to, and extend the Underworld3 computational geodynamics framework.

## What is Underworld3?

Underworld3 is a Python library for computational geodynamics and geophysical modeling, built on a foundation of:

- **PETSc parallel computing** for scalable finite element methods
- **SymPy symbolic mathematics** for mathematical self-description  
- **Particle-in-cell methods** for Lagrangian tracking
- **Natural mathematical syntax** for intuitive model development

## Getting Started

::: {.callout-tip}
## Quick Navigation for Developers

- **New to UW3?** → Start with [Development Setup](development-setup.qmd)
- **Understanding the codebase?** → Read [Architecture Overview](UW3_Architecture_and_Documentation_Overview.qmd)
- **Working with math expressions?** → See [Mathematical Objects](UW3_Developers_MathematicalObjects.qmd)
- **Handling data arrays?** → Check [NDArray System](UW3_Developers_NDArrays.qmd)
- **Need coding standards?** → Reference [Style Guide](UW3_Style_and_Patterns_Guide.qmd)
:::

## Documentation Structure

This documentation is organized into focused sections:

### Core Computational Systems
The foundation of Underworld3's numerical capabilities:

- **Meshing**: Geometric mesh generation and manipulation
- **Discretisation**: Finite element infrastructure and field management
- **Solvers**: PDE solvers and numerical methods
- **Constitutive Models**: Material physics and rheology

### Data Management Systems  
How Underworld3 handles data across parallel systems:

- **NDArray System**: Modern data access patterns (v0.99+)
- **Swarm System**: Particle tracking and Lagrangian methods
- **Variables**: Mesh and swarm field variables
- **Parallel Data**: MPI and distributed memory management

### Mathematical & Symbolic Systems
The mathematical foundation enabling natural syntax:

- **Mathematical Objects**: Natural math syntax implementation
- **Expressions & Functions**: Symbolic expression handling
- **Mathematics**: Vector calculus and tensor operations
- **Coordinate Systems**: Transformations and spatial handling

### Utility & Extension Systems
Supporting infrastructure and extensibility:

- **Visualization**: Plotting and rendering capabilities
- **Scaling**: Dimensional analysis and non-dimensionalization  
- **Cython Integration**: Performance-critical compiled extensions
- **JIT Compilation**: Just-in-time code generation

## Current Architecture Status

Based on our comprehensive analysis, here's the current state of Underworld3 subsystems. Areas requiring significant documentation work are marked with (§).

### Well-Documented Subsystems
- **Discretisation** (4,145 lines) - Finite element infrastructure
- **Solvers** (3,907 lines) - PDE solving capabilities  
- **Swarm** (4,484 lines) - Particle systems and tracking
- **NDArray** (946 lines) - Modern data access (v0.99+)
- **Constitutive Models** (1,967 lines) - Material physics

### Partially Documented Subsystems
- **Meshing** (4,437 lines) - Needs geometric parameter details (§)
- **Mathematics** (962 lines) - Inconsistent documentation quality (§)
- **Visualization** (788 lines) - Basic documentation present

### Documentation Gaps
- **Expressions/Functions** (1,192 lines) - Critical user-facing gap (§)
- **Scaling** (208 lines) - Minimal documentation (§)
- **Cython Integration** - No documentation for C bridge (§)

## Contributing to Documentation

We welcome contributions to improve this documentation! Each subsystem page includes:

- **Current implementation status**
- **API reference and examples**  
- **Developer guidelines**
- **Performance considerations**
- **Testing patterns**

### Documentation Priorities

Based on our analysis, these are the highest priority areas for contribution:

1. **Critical**: [Expressions & Functions](subsystems/expressions-functions.qmd) - Core user functionality
2. **Critical**: [Cython Integration](subsystems/cython-integration.qmd) - Bridge documentation missing
3. **High**: [Meshing](subsystems/meshing.qmd) - Geometric parameter guidance
4. **High**: [Mathematics](subsystems/mathematics.qmd) - Consistency improvements

## Development Workflow

Underworld3 follows established patterns for maintaining code quality:

```{mermaid}
graph LR
    A[Feature Branch] --> B[Development]
    B --> C[Testing] 
    C --> D[Documentation]
    D --> E[Code Review]
    E --> F[Integration]
    
    style A fill:#e1f5fe
    style F fill:#e8f5e8
```

### Key Principles

1. **Solver Stability**: Preserve performance of validated numerical methods
2. **Backward Compatibility**: Smooth migration paths for API changes  
3. **Mathematical Clarity**: Code should look like mathematical equations
4. **Parallel Safety**: All operations designed for distributed computing
5. **Progressive Enhancement**: New features coexist with legacy patterns

## Quick Reference

### Common Development Tasks

| Task | Documentation | Quick Link |
|------|---------------|------------|
| Set up development environment | [Development Setup](development-setup.qmd) | Environment configuration |
| Understand data access patterns | [NDArray System](UW3_Developers_NDArrays.qmd) | `var.array[...] = values` |
| Write mathematical expressions | [Mathematical Objects](UW3_Developers_MathematicalObjects.qmd) | `momentum = density * velocity` |
| Follow coding standards | [Style Guide](UW3_Style_and_Patterns_Guide.qmd) | Patterns and conventions |
| Add new functionality | [Contributing](contributing.qmd) | Development workflow |
| Debug parallel issues | [MPI Parallelism](advanced/mpi-parallelism.qmd) | Parallel debugging |
| Optimize performance | [Performance Guide](guidelines/performance-optimization.qmd) | Profiling and optimization |

### Build and Test Commands

```bash
# Build Underworld3 with pixi
pixi run underworld-build

# Run test suite  
pixi run underworld-test

# Build documentation
quarto render
```

## Community and Support

- **Repository**: [github.com/underworldcode/underworld3](https://github.com/underworldcode/underworld3)
- **Issues**: Report bugs and request features on GitHub
- **Discussions**: Join the community for questions and collaboration
- **Documentation**: Help improve these docs through pull requests

---

::: {.callout-note}
## About This Documentation

This developer documentation is built with [Quarto](https://quarto.org) and covers Underworld3 version 0.99+. The documentation includes both conceptual guides and practical implementation details for contributing to the Underworld3 ecosystem.

**Last Updated**: {{< meta date >}}  
**Version**: 2.0  
**Authors**: Underworld Development Team
:::