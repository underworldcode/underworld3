#!/bin/bash
set -e

# Install pixi
curl -fsSL https://pixi.sh/install.sh | sh
export PATH="$HOME/.pixi/bin:$PATH"

# Install runtime environment (includes petsc, jupyter, viz tools)
pixi install -e runtime

# Build underworld3
pixi run -e runtime build

# Make pixi environment available to Jupyter
# The kernel will use pixi's Python with all dependencies
pixi run -e runtime python -m ipykernel install --user --name=underworld3 --display-name="Underworld3"
